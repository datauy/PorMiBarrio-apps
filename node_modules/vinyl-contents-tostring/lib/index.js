'use strict';

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _streamToString = require('stream-to-string');

var _streamToString2 = _interopRequireDefault(_streamToString);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = function (file, enc) {
  if (!file || typeof file.isBuffer !== 'function' || typeof file.isStream !== 'function') {
    return _bluebird2.default.reject(new TypeError('First argument must be a Vinyl file'));
  }

  if (file.isBuffer()) {
    return _bluebird2.default.resolve(file.contents.toString(enc));
  } else if (file.isStream()) {
    // TODO: support encoding in streamToString
    return (0, _streamToString2.default)(file.contents, enc);
  }

  return _bluebird2.default.resolve('');
};